<?xml version="1.0" encoding="UTF-8" ?>

<!-- http://wiki.apache.org/solr/DataImportHandler -->

<dataConfig>
  <!-- Data Source definition for Database -->
  <dataSource type="JdbcDataSource"
			  name="OpenInfRA-DB"
			  driver="org.postgresql.Driver"
			  url="jdbc:postgresql://localhost:5432/openinfra"
			  user="postgres"
			  password="postgres"
			  batchSize="1" />
  <!-- <dataSource type="BinFileDataSource" name="OpenInfRA-Files"/> -->
  
  <document name="OpenInfRA-Data">
    <!-- File Import -->
    <!-- 
    <entity name="filesystem" dataSource="OpenInfRA-Files" rootEntity="false" processor="FileListEntityProcessor" baseDir="d:/docs" fileName=".*\.(doc|pdf|txt|xml)" onError="skip" recursive="true">
      <field column="fileAbsolutePath" name="id" />
      <field column="fileSize" name="size" />
      <field column="fileLastModified" name="lastModified" />
      <field column="file" name="fileName" />
      
      <entity name="documentImport" dataSource="OpenInfRA-Files" processor="TikaEntityProcessor" url="${filesystem.fileAbsolutePath}" format="text">          
        <field column="Author" name="author" meta="true" />
        <field column="title" name="title" meta="true" />
        <field column="text" name="text" />
      </entity>
    </entity>
     -->
    <!-- Database Import -->
    <entity name="openinfra" dataSource="OpenInfRA-DB"
    		query="SELECT &quot;id&quot;
    		         FROM &quot;project_e7d42bff-4e40-4f43-9d1b-1dc5a190cd75&quot;.&quot;project&quot;">
    </entity>
    <!-- 
    <entity name="database" dataSource="OpenInfRA-DB" query="SELECT &quot;Id&quot; FROM &quot;Attributwert&quot;">
      <entity name="attributes" dataSource="OpenInfRA-DB" query="
        SELECT
          &quot;aw&quot;.&quot;Id&quot; &quot;Id&quot;,
          &quot;lcs_at_name&quot;.&quot;Freitext&quot; &quot;Attributtyp&quot;,
          &quot;lcs_at_beschreibung&quot;.&quot;Freitext&quot; &quot;Attributtypbeschreibung&quot;,
          returnAttValue(${database.Id}) &quot;Wert&quot;,
          returnAttDomain(${database.Id}) &quot;Wertebereich&quot;,
          returnAttGeo(${database.Id}) &quot;Geometrie&quot;,
          returnAttUnit(${database.Id}) &quot;Einheit&quot;,
          &quot;lcs_at_datentyp&quot;.&quot;Freitext&quot; &quot;Datentyp&quot;,
          &quot;lcs_ta_beschreibung&quot;.&quot;Freitext&quot; &quot;Themenausprägung&quot;,
          &quot;lcs_thema&quot;.&quot;Freitext&quot; &quot;Thema&quot;,
          &quot;ti&quot;.&quot;Id&quot; &quot;Themeninstanz&quot;
        FROM
          &quot;Attributwert&quot; &quot;aw&quot;,
          &quot;Attributtyp&quot; &quot;at&quot;,
          &quot;Themeninstanz&quot; &quot;ti&quot;,
          &quot;Themenauspraegung&quot; &quot;ta&quot;,
          &quot;WL_Werteliste&quot; &quot;wlw_at_datentyp&quot;,
          &quot;WL_Werteliste&quot; &quot;wlw_thema&quot;,
          &quot;LocalizedCharacterString&quot; &quot;lcs_at_name&quot;,
          &quot;LocalizedCharacterString&quot; &quot;lcs_at_beschreibung&quot;,
          &quot;LocalizedCharacterString&quot; &quot;lcs_at_datentyp&quot;,
          &quot;LocalizedCharacterString&quot; &quot;lcs_thema&quot;,
          &quot;LocalizedCharacterString&quot; &quot;lcs_ta_beschreibung&quot;
        WHERE
          &quot;aw&quot;.&quot;Attributtyp_Id&quot; = &quot;at&quot;.&quot;Id&quot; AND
          &quot;aw&quot;.&quot;Themeninstanz_Id&quot; = &quot;ti&quot;.&quot;Id&quot; AND
          &quot;at&quot;.&quot;Datentyp&quot; = &quot;wlw_at_datentyp&quot;.&quot;Id&quot; AND
          &quot;ti&quot;.&quot;Themenauspraegung_Id&quot; = &quot;ta&quot;.&quot;Id&quot; AND
          &quot;ta&quot;.&quot;Thema_Id&quot; = &quot;wlw_thema&quot;.&quot;Id&quot; AND
          &quot;wlw_at_datentyp&quot;.&quot;Name&quot; = &quot;lcs_at_datentyp&quot;.&quot;PT_FreeText_Id&quot; AND
          &quot;wlw_thema&quot;.&quot;Name&quot; = &quot;lcs_thema&quot;.&quot;PT_FreeText_Id&quot; AND
          &quot;at&quot;.&quot;Name&quot; = &quot;lcs_at_name&quot;.&quot;PT_FreeText_Id&quot; AND
          &quot;ta&quot;.&quot;Beschreibung&quot; = &quot;lcs_ta_beschreibung&quot;.&quot;PT_FreeText_Id&quot; AND
          &quot;at&quot;.&quot;Beschreibung&quot; = &quot;lcs_at_beschreibung&quot;.&quot;PT_FreeText_Id&quot; AND
          &quot;aw&quot;.&quot;Id&quot; = ${database.Id};
      ">
        <field column="Id" name="id" />
        <field column="Attributtyp" name="attribute_type" />
        <field column="Attributtypbeschreibung" name="attribute_type_description" />
        <field column="Wert" name="value" />
        <field column="Wertebereich" name="domain" />
        <field column="Geometrie" name="geometry" />
        <field column="Einheit" name="unit" />
        <field column="Datentyp" name="data_type" />
        <field column="Themenausprägung" name="topic_characteristic" />
        <field column="Thema" name="topic" />
        <field column="Themeninstanz" name="topic_instance" />
      </entity>
    </entity>
     -->
    <!--
    
    <entity name="database" dataSource="OpenInfRA-DB" query="SELECT * FROM &quot;LocalizedCharacterString&quot;">
      <field column="PT_FreeText_Id" name="id" />
      <field column="Freitext" name="freetext" />
      
      <entity name="language" dataSource="OpenInfRA-DB" query="SELECT &quot;Sprachkodierung&quot; FROM &quot;Sprachkodierung&quot; WHERE &quot;Id&quot; = ${database.PT_Local_Id}">
        <field column="Sprachkodierung" name="language_code" />
      </entity>
      <entity name="country" dataSource="OpenInfRA-DB" query="SELECT &quot;Landkodierung&quot; FROM &quot;Landkodierung&quot; WHERE &quot;Id&quot; = ${database.PT_Local_Id}">
        <field column="Landkodierung" name="country_code" />
      </entity>
      <entity name="character" dataSource="OpenInfRA-DB" query="SELECT &quot;Zeichenkodierung&quot; FROM &quot;Zeichenkodierung&quot; WHERE &quot;Id&quot; = ${database.PT_Local_Id}">
        <field column="Zeichenkodierung" name="character_code" />
      </entity>
    </entity>
    -->
  </document>
</dataConfig>
 